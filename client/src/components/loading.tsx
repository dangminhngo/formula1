import { useEffect, useState } from 'react'

interface LoadingProps extends React.PropsWithChildren {
  isLoading?: boolean
}
export default function Loading({ isLoading = true, children }: LoadingProps) {
  const [loadingState, setLoadingState] = useState(false)

  useEffect(() => {
    if (isLoading) {
      setLoadingState(true)
    }

    let timeoutId: ReturnType<typeof setTimeout>
    if (!isLoading && loadingState) {
      timeoutId = setTimeout(() => setLoadingState(isLoading), 400)
    }

    return () => clearTimeout(timeoutId)
  }, [isLoading, loadingState])

  return loadingState ? (
    <div className="grid place-items-center py-8">
      <svg
        width="512"
        height="512"
        viewBox="0 0 512 512"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="h-64 w-64"
      >
        <g clipPath="url(#clip0_1_2)">
          <g clipPath="url(#clip1_1_2)">
            <mask
              id="mask0_1_2"
              style={{ maskType: 'luminance' }}
              maskUnits="userSpaceOnUse"
              x="-103"
              y="-107"
              width="565"
              height="566"
            >
              <path
                d="M-103 115.204L239.973 -106.729L461.906 236.244L118.933 458.177L-103 115.204Z"
                fill="white"
              />
            </mask>
            <g mask="url(#mask0_1_2)">
              <path
                d="M338.729 85.4636C326.68 66.8438 311.827 51.1526 295.071 38.5753C322.393 89.9009 312.628 131.663 278.005 137.562C245.561 143.088 235.171 89.5129 223.312 68.4147C203.196 32.6578 175.494 -5.24542 91.8742 2.4461C149.945 35.2959 146.952 80.9736 124.102 98.4361C98.7471 117.788 58.1163 108.584 40.8604 62.1288C25.5706 102.575 48.1679 139.377 72.3577 156.991C97.5781 175.346 100.944 201.979 79.4611 219.082C55.4727 238.19 21.8345 217.432 4.05968 161.17C-1.58874 204.128 8.26775 247.693 31.8581 284.035C86.6931 368.777 199.838 393.02 284.579 338.185C369.321 283.35 393.564 170.205 338.729 85.4636Z"
                fill="#F59E0B"
              />
            </g>
            <mask
              id="mask1_1_2"
              style={{ maskType: 'luminance' }}
              maskUnits="userSpaceOnUse"
              x="2"
              y="1"
              width="367"
              height="367"
            >
              <path
                d="M124.102 98.4361C98.762 117.791 58.1164 108.584 40.8604 62.1288C25.5615 102.581 48.1828 139.38 72.3668 156.985C97.5781 175.346 100.944 201.979 79.4611 219.082C55.4727 238.19 21.8377 217.417 4.0597 161.17C-1.58872 204.128 8.26776 247.693 31.8581 284.035C86.6931 368.777 199.838 393.02 284.579 338.185C369.321 283.35 393.564 170.205 338.729 85.4636C326.68 66.8438 311.827 51.1526 295.071 38.5753C322.387 89.8918 312.628 131.663 278.005 137.562C245.57 143.082 235.171 89.5129 223.312 68.4147C203.196 32.6578 175.494 -5.24542 91.8742 2.4461C149.939 35.2869 146.958 80.9826 124.102 98.4361Z"
                fill="white"
              />
            </mask>
            <g mask="url(#mask1_1_2)">
              <path
                d="M357.844 213.947C345.072 194.208 327.834 179.125 308.31 169.158C327.649 196.135 310.259 222.868 293.689 226.112C269.767 230.798 266.401 214.435 243.988 190.523C221.575 166.612 190.603 159.968 157.419 169.712C214.713 213.73 196.782 255.22 182.673 269.689C168.265 284.467 148.794 291.599 123.457 256.698C119.838 273.305 119.545 290.464 122.595 307.185C125.646 323.906 131.979 339.856 141.23 354.115C179.934 413.928 259.809 431.042 319.621 392.338C379.434 353.634 396.548 273.76 357.844 213.947Z"
                fill="#FDE047"
              />
            </g>
          </g>
          <g className="animate-spinSlow origin-[339px_344px]">
            <circle cx="339.493" cy="344.559" r="166.507" fill="#1E293B" />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M339.493 511.066C431.452 511.066 506 436.518 506 344.559C506 252.6 431.452 178.052 339.493 178.052C247.534 178.052 172.986 252.6 172.986 344.559C172.986 436.518 247.534 511.066 339.493 511.066ZM339.493 494.415C422.256 494.415 489.349 427.322 489.349 344.559C489.349 261.796 422.256 194.703 339.493 194.703C256.73 194.703 189.637 261.796 189.637 344.559C189.637 427.322 256.73 494.415 339.493 494.415Z"
              fill="#0F172A"
            />
            <circle cx="339.493" cy="344.559" r="108.23" fill="#0F172A" />
            <circle cx="339.493" cy="344.559" r="91.5789" fill="#64748B" />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M331.463 261.306C331.463 256.708 335.19 252.98 339.788 252.98V252.98C344.386 252.98 348.113 256.708 348.113 261.306V275.125C348.113 279.352 351.3 282.847 355.41 283.831C366.883 286.575 377.126 292.487 385.162 300.59C388.078 303.529 392.599 304.455 396.185 302.385L407.725 295.722C411.707 293.423 416.799 294.788 419.097 298.77V298.77C421.396 302.752 420.032 307.843 416.05 310.142L404.757 316.662C401.123 318.761 399.68 323.224 400.841 327.257C402.422 332.751 403.269 338.556 403.269 344.559C403.269 350.562 402.422 356.367 400.841 361.861C399.68 365.894 401.123 370.357 404.757 372.456L416.05 378.976C420.032 381.275 421.396 386.367 419.097 390.348V390.348C416.798 394.33 411.707 395.695 407.725 393.396L396.185 386.733C392.599 384.663 388.078 385.589 385.162 388.528C377.126 396.631 366.883 402.543 355.41 405.287C351.3 406.271 348.113 409.767 348.113 413.993V427.813C348.113 432.411 344.386 436.138 339.788 436.138V436.138C335.19 436.138 331.463 432.411 331.463 427.813V413.468C331.463 409.348 328.428 405.907 324.452 404.83C313.398 401.833 303.562 395.877 295.847 387.865C292.938 384.845 288.355 383.867 284.724 385.964L271.851 393.396C267.869 395.695 262.777 394.33 260.478 390.349V390.349C258.179 386.367 259.544 381.275 263.526 378.976L276.608 371.423C280.196 369.351 281.653 364.968 280.567 360.969C279.147 355.74 278.388 350.238 278.388 344.559C278.388 338.88 279.147 333.378 280.567 328.149C281.653 324.15 280.196 319.767 276.608 317.695L263.525 310.142C259.544 307.843 258.179 302.752 260.478 298.77V298.77C262.777 294.788 267.869 293.423 271.851 295.722L284.724 303.154C288.355 305.251 292.938 304.273 295.847 301.253C303.562 293.241 313.398 287.285 324.452 284.289C328.428 283.211 331.463 279.77 331.463 275.65V261.306Z"
              fill="#94A3B8"
            />
            <circle cx="339.493" cy="344.559" r="49.9521" fill="#475569" />
            <circle
              cx="339.493"
              cy="344.559"
              r="33.8218"
              fill="#94A3B8"
              stroke="#1E293B"
              stroke-width="1.04067"
            />
            <circle
              cx="339.493"
              cy="344.559"
              r="24.4557"
              fill="#94A3B8"
              stroke="#1E293B"
              stroke-width="1.04067"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M335.33 368.844V360.864H343.656V368.844C355.468 366.863 364.469 356.589 364.469 344.214C364.469 331.838 355.468 321.565 343.656 319.583V327.563H335.33V319.583C323.518 321.565 314.517 331.838 314.517 344.214C314.517 356.589 323.518 366.863 335.33 368.844Z"
              fill="#1E293B"
            />
            <path
              d="M314.517 344.214H339.493L315.037 349.417C314.77 348.054 314.552 346.447 314.517 344.214Z"
              fill="#334155"
            />
            <path
              d="M364.469 344.214H339.493L363.949 339.01C364.216 340.373 364.434 341.98 364.469 344.214Z"
              fill="#94A3B8"
            />
            <circle cx="339" cy="344" r="8" fill="#CBD5E1" />
            <circle
              cx="339.493"
              cy="315.42"
              r="3.66268"
              fill="#64748B"
              stroke="#64748B"
            />
            <circle
              cx="368.632"
              cy="344.559"
              r="3.66268"
              transform="rotate(90 368.632 344.559)"
              fill="#64748B"
              stroke="#64748B"
            />
            <circle
              cx="364.728"
              cy="329.99"
              r="3.66268"
              transform="rotate(60 364.728 329.99)"
              fill="#64748B"
              stroke="#64748B"
            />
            <circle
              cx="314.258"
              cy="329.99"
              r="3.66268"
              transform="rotate(-60 314.258 329.99)"
              fill="#64748B"
              stroke="#64748B"
            />
            <circle
              cx="324.924"
              cy="319.324"
              r="3.66268"
              transform="rotate(-30 324.924 319.324)"
              fill="#64748B"
              stroke="#64748B"
            />
            <circle
              cx="354.062"
              cy="319.324"
              r="3.66268"
              transform="rotate(30 354.062 319.324)"
              fill="#64748B"
              stroke="#64748B"
            />
            <circle
              cx="339.493"
              cy="373.698"
              r="3.66268"
              fill="#64748B"
              stroke="#64748B"
            />
            <circle
              cx="310.354"
              cy="344.559"
              r="3.66268"
              transform="rotate(90 310.354 344.559)"
              fill="#64748B"
              stroke="#64748B"
            />
            <circle
              cx="314.258"
              cy="359.128"
              r="3.66268"
              transform="rotate(60 314.258 359.128)"
              fill="#64748B"
              stroke="#64748B"
            />
            <circle
              cx="364.728"
              cy="359.128"
              r="3.66268"
              transform="rotate(-60 364.728 359.128)"
              fill="#64748B"
              stroke="#64748B"
            />
            <circle
              cx="354.062"
              cy="369.794"
              r="3.66268"
              transform="rotate(-30 354.062 369.794)"
              fill="#64748B"
              stroke="#64748B"
            />
            <circle
              cx="324.924"
              cy="369.794"
              r="3.66268"
              transform="rotate(30 324.924 369.794)"
              fill="#64748B"
              stroke="#64748B"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M340.534 236.329V252.98H338.452V236.329H340.534ZM234.951 315.507L251.035 319.816L250.496 321.826L234.413 317.517L234.951 315.507ZM260.183 297.729L245.763 289.404L244.723 291.206L259.143 299.531L260.183 297.729ZM262.963 268.029L274.737 279.803L273.265 281.275L261.491 269.501L262.963 268.029ZM419.843 298.77L434.263 290.444L433.223 288.642L418.803 296.967L419.843 298.77ZM417.063 268.029L405.29 279.803L403.818 278.331L415.592 266.557L417.063 268.029ZM294.744 264.209L286.419 249.789L284.616 250.829L292.942 265.249L294.744 264.209ZM394.648 250.829L386.323 265.249L384.521 264.209L392.846 249.789L394.648 250.829ZM431.072 344.559H447.723V342.478H431.072V344.559ZM444.035 316.547L427.951 320.857L427.413 318.846L443.496 314.537L444.035 316.547ZM364.236 256.101L368.546 240.017L366.535 239.479L362.226 255.562L364.236 256.101ZM368.546 449.101L364.236 433.017L366.246 432.479L370.556 448.562L368.546 449.101ZM340.534 436.138V452.789H338.452V436.138H340.534ZM444.035 372.571L427.951 368.261L427.413 370.272L443.496 374.581L444.035 372.571ZM419.843 389.308L434.263 397.633L433.223 399.436L418.803 391.11L419.843 389.308ZM417.063 421.089L405.29 409.315L403.818 410.787L415.592 422.561L417.063 421.089ZM261.224 390.349L246.804 398.674L245.763 396.871L260.183 388.546L261.224 390.349ZM264.004 421.089L275.778 409.315L274.306 407.843L262.532 419.617L264.004 421.089ZM386.323 423.869L394.648 438.289L392.846 439.329L384.521 424.909L386.323 423.869ZM286.419 438.289L294.744 423.869L292.942 422.828L284.616 437.248L286.419 438.289ZM247.914 344.559H231.263V342.478H247.914V344.559ZM234.951 372.571L251.035 368.261L250.496 366.251L234.413 370.561L234.951 372.571ZM316.831 433.017L312.522 449.101L310.511 448.562L314.821 432.479L316.831 433.017ZM312.522 240.017L316.831 256.101L318.842 255.562L314.532 239.479L312.522 240.017Z"
              fill="#020617"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M341.094 178.052V203.668H339.013V178.052L341.094 178.052ZM178.66 299.863L203.403 306.493L202.864 308.503L178.121 301.873L178.66 299.863ZM217.478 272.513L195.294 259.704L194.253 261.507L216.437 274.315L217.478 272.513ZM221.755 226.821L239.868 244.934L238.397 246.406L220.283 228.293L221.755 226.821ZM463.109 274.114L485.293 261.306L484.253 259.503L462.068 272.311L463.109 274.114ZM458.832 226.821L440.719 244.934L439.247 243.463L457.361 225.349L458.832 226.821ZM270.649 220.943L257.84 198.759L256.038 199.799L268.846 221.984L270.649 220.943ZM424.348 200.36L411.539 222.544L409.737 221.504L422.545 199.319L424.348 200.36ZM480.384 344.559H506V342.478H480.384V344.559ZM500.326 301.464L475.583 308.094L475.044 306.083L499.788 299.453L500.326 301.464ZM377.559 208.469L384.189 183.726L382.179 183.187L375.549 207.931L377.559 208.469ZM384.189 505.393L377.559 480.649L379.57 480.11L386.2 504.854L384.189 505.393ZM341.094 485.45V511.066H339.013V485.45H341.094ZM500.326 387.654L475.583 381.024L475.044 383.035L499.788 389.665L500.326 387.654ZM463.109 413.403L485.293 426.212L484.253 428.014L462.068 415.206L463.109 413.403ZM458.832 462.297L440.719 444.184L439.247 445.655L457.36 463.769L458.832 462.297ZM219.079 415.004L196.895 427.813L195.854 426.01L218.038 413.202L219.079 415.004ZM223.356 462.297L241.469 444.184L239.998 442.712L221.884 460.826L223.356 462.297ZM411.539 466.574L424.348 488.758L422.545 489.799L409.737 467.615L411.539 466.574ZM257.84 488.758L270.649 466.574L268.846 465.533L256.038 487.718L257.84 488.758ZM198.602 344.559H172.986V342.478H198.602V344.559ZM178.659 387.654L203.403 381.024L202.864 379.014L178.121 385.644L178.659 387.654ZM304.629 480.649L297.999 505.393L295.988 504.854L302.618 480.11L304.629 480.649ZM297.999 183.726L304.629 208.469L306.639 207.931L300.009 183.187L297.999 183.726Z"
              fill="#020617"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M443.483 261.306C461.764 284.11 472.699 313.058 472.699 344.559C472.699 376.06 461.764 405.008 443.483 427.813L426.909 427.813C447.544 406.153 460.211 376.835 460.211 344.559C460.211 312.283 447.544 282.965 426.909 261.306L443.483 261.306ZM235.503 261.306C217.222 284.11 206.287 313.058 206.287 344.559C206.287 376.06 217.222 405.008 235.503 427.813L252.076 427.813C231.442 406.153 218.775 376.835 218.775 344.559C218.775 312.283 231.442 282.965 252.076 261.306L235.503 261.306Z"
              fill="#64748B"
            />
          </g>
        </g>
        <defs>
          <clipPath id="clip0_1_2">
            <rect width="512" height="512" fill="white" />
          </clipPath>
          <clipPath id="clip1_1_2">
            <rect
              width="408.515"
              height="408.515"
              fill="white"
              transform="translate(-103 115.204) rotate(-32.9063)"
            />
          </clipPath>
        </defs>
      </svg>
    </div>
  ) : (
    children
  )
}
